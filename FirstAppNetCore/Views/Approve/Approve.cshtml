@model IEnumerable<FirstAppNetCore.Models.FeedModel>
@{
    ViewData["Title"] = "Approve";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Construction is ultimate responsive construction html template which include 3 homepage demos.">
    <title>News24 - Responsive News Template</title>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png">
    <!-- themify Icon CSS -->
    <link rel="stylesheet" href="css/themify-icons.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="css/animate.min.css">
    <!-- Elegant Icons CSS -->
    <link rel="stylesheet" href="css/elegant-line-icons.css">
    <!-- Bootsrtap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <!-- Meanmenu CSS -->
    <link rel="stylesheet" href="css/meanmenu.css">
    <!-- Swipebox CSS -->
    <link rel="stylesheet" href="css/swipebox.min.css">
    <!--FontAewsome CSS-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Theme CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="~/css/site.css">
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<style>
    .thumbs {
        background-color: darkgrey;
        width: 50px;
        height: 50px;
        border-radius: 20px;
        padding-left: 5px;
        padding-top: 2px;
        transition: 0.3s;
        display: inline-block;
    }

    .thumbsl:hover {
        transition: 0.2s;
        background-color: lightgrey;
        position: relative;
        color: green;
    }

    .thumbsd:hover {
        transition: 0.2s;
        background-color: lightgrey;
        position: relative;
        color: red;
    }

    .approveBox {
        display: none;
        background-color: green;
        opacity: 0.8;
        width: 100%;
        height: 100%;
        position: absolute;
        font-size: 40px;
        line-height: 300px;
        text-align: center;
        vertical-align: middle;
        color: black;
    }

    .disapproveBox {
        display: none;
        background-color: red;
        opacity: 0.8;
        width: 100%;
        height: 100%;
        position: absolute;
        font-size: 40px;
        line-height: 300px;
        text-align: center;
        vertical-align: middle;
        color: black;
    }
</style>

@{ int tt = 0;

    <script>
        var jsonNews = [];
    </script>
    <div class="container">
        <div class="row">
            @foreach (var item in Model)
            {
                if (item.Img == "/img/single-post.jpg" || item.Img.Length > 250)
                {
                    continue;
                }

                <div id="c-@tt" class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="margin-top:30px;float:left;">
                    <div class="grid-posts">
                        <div class="grid-post" style="position:relative;float:left;">
                            <div id="approve-@tt" class="approveBox">Approved</div>
                            <div id="disapprove-@tt" class="disapproveBox">Disapproved</div>
                            <a href="#" class="img-crop"><img id="img-@tt" src="@item.Img" style="float:left;width: 100%; height: 200px;"></a>
                            <div class="post-info padding-15 ptb-20 bd-grey">
                                <h4 id="title-@tt" class="mb-15 fw-6"><a id="link-@tt" target="_blank" href="@item.Link" class="text-dark">@item.Title</a></h4>
                                <h6 id="description-@tt" class="text-dark">@Html.Raw(item.Description)</h6>
                                <h6 class="text-dark">@item.Fonte</h6>
                                <div style="display:none">
                                    <span id="date-@tt" class="date"><i class="ti-timer"></i>@item.PublishDate</span>
                                </div>
                                <div class="col-xs-offset-4">
                                    <i id="thumbs-up-@tt" class="fa fa-thumbs-up fa-3x thumbs thumbsl"></i>
                                    <i id="thumbs-down-@tt" class="fa fa-thumbs-down fa-3x thumbs thumbsd"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    $('#thumbs-up-@tt').click(function () {
                        var title = $('#title-@tt').text();
                        var description = $('#description-@tt').text();
                        var link = $('#link-@tt').attr('href');
                        var img = $('#img-@tt').attr('src');
                        var publishdate = $('#date-@tt').text();

                        item = {}
                        item["title"] = title;
                        item["description"] = description;
                        item["link"] = link;
                        item["img"] = img;
                        item["publishdate"] = publishdate;

                        jsonNews.push(item);

                        $('#approve-@tt').delay(100).fadeIn();
                        $('#approve-@tt').delay(800).fadeOut();
                        $('#c-@tt').delay(800).fadeOut();
                    });
                    $('#thumbs-down-@tt').click(function () {
                        $('#disapprove-@tt').delay(100).fadeIn();
                        $('#disapprove-@tt').delay(800).fadeOut();
                        $('#c-@tt').delay(800).fadeOut();
                    });

                    function save() {
                        $.ajax({
                            url: '/approve/savenews',
                            type: 'POST',
                            data: JSON.stringify(jsonNews),
                            cache: false,
                            contentType: "application/json",
                            success: function (result) {
                                console.log(result);
                            }
                        });
                    }
                </script>

                tt++;
            }
        </div>
    </div>

    <button id="btnSave" class="col-xs-offset-3 btn btn-block btn-success" onclick="save()" style="width:50%;height:80px;margin-top:50px;">Save News</button>
}